<!DOCTYPE html>
<html lang="en">
<!-- The link below helped me manage pages with css
  Source: https://stackoverflow.com/questions/29788182/how-do-i-link-all-pages-to-the-same-css-external-file -->

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/songsLibPage.css" />
    <title>SongsLibs App</title>
</head>

<body>
    <form class="form containerSearch" action="/songsLib" method="POST">
        <div class="image search">
            <input id="song" class="input font row" type="text" name="title"
                placeholder="Type the song or artist's name" />

            <!-- The serch icon -->
            <!-- I used this website for icons:  -->
            <i id="searchIcon" class="fa-solid fa-magnifying-glass" type="submit"></i>
        </div>
        <!-- <div class="jinaLangu">Shindano</div> -->
    </form>

<!-- 
    <iframe class="iframe" width="420" height="345" src="">
    </iframe> -->

    <script>

        let myVideoFrame = (videoUrl) => {


            let videoUrl = document.querySelector('a').href;

            let vid = document.querySelector('iframe').getAttribute('src') =videoUrl ;

        }
    </script>

    <div class="allVideos">
        <div class="container">
            <% searchedTitle.forEach(song=> {%>

                <div class="container songs">
                    <!-- This code links the thumbnail to the youtube link -->
                    <!-- I skipped ads by adding the "_popup" between "watch" and "?" -->

                    <a class="button submit font" href="https://www.youtube.com/watch_popup?v=<%=song.id.videoId%>"
                        target="iframe"><img src="<%=song.snippet.thumbnails.medium.url %>" target="iframe"
                            alt="<%=song.snippet.title%>" height="120" width="180" onclick="myVideoFrame()" /></a>

                    <!-- This is the youtube link to the video -->
                    <div class="title">
                        <a href="https://www.youtube.com/watch_popup?v=<%=song.id.videoId%>" target="iframe">
                            <%=song.snippet.title%>
                        </a>
                        <p class="channel">
                            Channel:
                            <%=song.snippet.channelTitle%>
                        </p>
                        <!-- Format the time -->
                        <div id="publishedTime">

                            <p class="publishedTime">
                                Published Time:
                                <%=song.snippet.publishedAt.substring(5,7)%>/
                                    <%=song.snippet.publishedAt.substring(8,10)%>/
                                        <%=song.snippet.publishedAt.substring(0,4)%>
                                            at
                                            <%=song.snippet.publishedAt.substring(11,19)%>
                            </p>
                        </div>
                    </div>
                </div>

                <% }); %>
        </div>
    </div>
</body>

</html>